# -*- coding: utf-8 -*-
# Kivy Language (KV) file for the Harmonauta application - Vers√£o Melhorada

<HarmonyScreen>:
    project_title_input: project_title_input
    project_description_input: project_description_input
    project_key_input: project_key_input
    lyrics_input: lyrics_input
    chord_input: chord_input
    degree_input: degree_input
    comment_input: comment_input
    cifra_preview: cifra_preview
    metadata_preview: metadata_preview
    chord_list: chord_list
    selected_chord_label: selected_chord_label

    orientation: 'vertical'
    padding: '0dp'
    spacing: '0dp'
    canvas.before:
        Color:
            rgba: 0.98, 0.98, 0.98, 1
        Rectangle:
            pos: self.pos
            size: self.size

    # Header com t√≠tulo do app - Melhorado
    BoxLayout:
        size_hint_y: None
        height: dp(80)
        padding: dp(20), dp(15)
        canvas.before:
            Color:
                rgba: 0.92, 0.92, 0.92, 1
            Rectangle:
                pos: self.pos
                size: self.size
            Color:
                rgba: 0, 0, 0, 0.08
            Rectangle:
                pos: self.x, self.y - dp(2)
                size: self.width, dp(2)

        Label:
            text: "üéµ HARMONAUTA"
            font_size: '26sp'
            #font_name: 'Arial'
            bold: True
            color: 0.15, 0.15, 0.15, 1
            halign: 'left'
            valign: 'middle'
            text_size: self.size
            padding_x: dp(10)

    ScrollView:
        size_hint: (1, 1)
        do_scroll_x: False
        bar_width: dp(12)
        bar_color: 0.1, 0.5, 0.8, 0.9
        scroll_type: ['bars', 'content']
        effect_cls: 'ScrollEffect'
        
        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height
            spacing: dp(25)
            padding: [dp(20), dp(20), dp(20), dp(20)]

            # Card de informa√ß√µes do projeto - Melhorado
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(15)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15), dp(15), dp(15), dp(15)]
                    Color:
                        rgba: 0.85, 0.85, 0.85, 0.5
                    Line:
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                        width: dp(1.5)
                padding: [dp(20), dp(20), dp(20), dp(20)]

                Label:
                    text: "üìã INFORMA√á√ïES DO PROJETO"
                    size_hint_y: None
                    height: dp(40)
                    font_size: '20sp'
                    #font_name: 'Arial'
                    bold: True
                    color: 0.2, 0.2, 0.2, 1
                    halign: 'left'
                    valign: 'middle'
                    text_size: self.width, None

                GridLayout:
                    cols: 1
                    spacing: dp(12)
                    size_hint_y: None
                    height: self.minimum_height

                    TextInput:
                        id: project_title_input
                        hint_text: "Nome da m√∫sica"
                        font_size: '18sp'
                        size_hint_y: None
                        height: dp(60)
                        multiline: False
                        padding: [dp(15), dp(15), dp(15), dp(15)]
                        background_color: 0.96, 0.96, 0.96, 1
                        foreground_color: 0, 0, 0, 1  # Alterado para preto
                        hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                        cursor_color: 0.1, 0.5, 0.8, 1
                        selection_color: 0.1, 0.5, 0.8, 0.3
                        write_tab: False

                    GridLayout:
                        cols: 2
                        spacing: dp(12)
                        size_hint_y: None
                        height: dp(60)

                        TextInput:
                            id: project_description_input
                            hint_text: "Compositor"
                            font_size: '18sp'
                            multiline: False
                            padding: [dp(15), dp(15), dp(15), dp(15)]
                            background_color: 0.96, 0.96, 0.96, 1
                            foreground_color: 0, 0, 0, 1  # Alterado para preto
                            hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                            cursor_color: 0.1, 0.5, 0.8, 1
                            selection_color: 0.1, 0.5, 0.8, 0.3
                            write_tab: False

                        TextInput:
                            id: project_key_input
                            hint_text: "Tonalidade"
                            font_size: '18sp'
                            multiline: False
                            padding: [dp(15), dp(15), dp(15), dp(15)]
                            background_color: 0.96, 0.96, 0.96, 1
                            foreground_color: 0, 0, 0, 1  # Alterado para preto
                            hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                            cursor_color: 0.1, 0.5, 0.8, 1
                            selection_color: 0.1, 0.5, 0.8, 0.3
                            write_tab: False

            # Card de bot√µes de a√ß√£o - Melhorado
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15), dp(15), dp(15), dp(15)]
                    Color:
                        rgba: 0.85, 0.85, 0.85, 0.5
                    Line:
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                        width: dp(1.5)
                padding: [dp(20), dp(20), dp(20), dp(20)]
                spacing: dp(15)

                Label:
                    text: "‚ö° A√á√ïES R√ÅPIDAS"
                    size_hint_y: None
                    height: dp(40)
                    font_size: '20sp'
                    #font_name: 'Arial'
                    bold: True
                    color: 0.2, 0.2, 0.2, 1
                    halign: 'left'
                    valign: 'middle'
                    text_size: self.width, None

                GridLayout:
                    cols: 2
                    rows: 2
                    spacing: dp(12)
                    size_hint_y: None
                    height: dp(120)

                    Button:
                        text: "üíæ SALVAR"
                        font_size: '17sp'
                        #font_name: 'Arial'
                        background_normal: ''
                        background_color: 0.2, 0.75, 0.45, 1
                        color: 1, 1, 1, 1
                        bold: True
                        on_release: root.save_project()
                        canvas.before:
                            Color:
                                rgba: self.background_color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10), dp(10), dp(10), dp(10)]

                    Button:
                        text: "üìÇ CARREGAR"
                        font_size: '17sp'
                        #font_name: 'Arial'
                        background_normal: ''
                        background_color: 0.1, 0.55, 0.85, 1
                        color: 1, 1, 1, 1
                        bold: True
                        on_release: root.load_project()
                        canvas.before:
                            Color:
                                rgba: self.background_color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10), dp(10), dp(10), dp(10)]

                    Button:
                        text: "üîÑ RESETAR"
                        font_size: '17sp'
                        #font_name: 'Arial'
                        background_normal: ''
                        background_color: 0.95, 0.35, 0.35, 1
                        color: 1, 1, 1, 1
                        bold: True
                        on_release: root.reset_all_fields()
                        canvas.before:
                            Color:
                                rgba: self.background_color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10), dp(10), dp(10), dp(10)]
                    
                    Button:
                        text: "üîç BUSCAR LETRA"
                        font_size: '16sp'
                        #font_name: 'Arial'
                        background_normal: ''
                        background_color: 0.95, 0.65, 0.25, 1
                        color: 1, 1, 1, 1
                        bold: True
                        on_release: root.fetch_lyrics_from_letras()
                        canvas.before:
                            Color:
                                rgba: self.background_color
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(10), dp(10), dp(10), dp(10)]

            # Card principal de edi√ß√£o - Melhorado
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: dp(500)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15), dp(15), dp(15), dp(15)]
                    Color:
                        rgba: 0.85, 0.85, 0.85, 0.5
                    Line:
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                        width: dp(1.5)
                padding: [dp(20), dp(20), dp(20), dp(20)]
                spacing: dp(15)

                Label:
                    text: "‚úèÔ∏è EDITOR DE CIFRAS"
                    size_hint_y: None
                    height: dp(40)
                    font_size: '20sp'
                    #font_name: 'Arial'
                    bold: True
                    color: 0.2, 0.2, 0.2, 1
                    halign: 'left'
                    valign: 'middle'
                    text_size: self.width, None

                BoxLayout:
                    orientation: 'horizontal'
                    spacing: dp(15)

                    # √Årea de texto principal (60%)
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.6
                        spacing: dp(10)

                        Label:
                            text: "üìù Letra com acordes"
                            size_hint_y: None
                            height: dp(35)
                            font_size: '16sp'
                            #font_name: 'Arial'
                            color: 0.4, 0.4, 0.4, 1
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.width, None

                        ScrollView:
                            scroll_type: ['bars', 'content']
                            bar_width: dp(10)
                            bar_color: 0.1, 0.5, 0.8, 0.7
                            canvas.before:
                                Color:
                                    rgba: 0.96, 0.96, 0.96, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12), dp(12), dp(12), dp(12)]
                            TextInput:
                                id: lyrics_input
                                hint_text: "Digite a letra com acordes no formato [Am]...\n\nExemplo:\n[C]Imagine there's no [F]heaven\n[Am]It's easy if you [C]try"
                                size_hint_y: None
                                height: max(self.parent.height, self.minimum_height)
                                font_size: '17sp'
                                #font_name: 'Arial'
                                multiline: True
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                background_color: 0.96, 0.96, 0.96, 1
                                foreground_color: 0, 0, 0, 1  # Alterado para preto
                                hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                                cursor_color: 0.1, 0.5, 0.8, 1
                                selection_color: 0.1, 0.5, 0.8, 0.3
                                on_text: root.on_text_change(*args)

                    # Painel de controles (40%)
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.4
                        spacing: dp(12)
                        canvas.before:
                            Color:
                                rgba: 0.97, 0.97, 0.97, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12), dp(12), dp(12), dp(12)]
                        padding: [dp(15), dp(15), dp(15), dp(15)]

                        Label:
                            text: "üéº Inserir Acorde"
                            size_hint_y: None
                            height: dp(40)
                            font_size: '18sp'
                            #font_name: 'Arial'
                            bold: True
                            color: 0.2, 0.2, 0.2, 1
                            halign: 'center'
                            valign: 'middle'
                            text_size: self.width, None

                        # Campo de acorde
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(90)
                            spacing: dp(8)

                            Label:
                                text: "üéµ Acorde"
                                size_hint_y: None
                                height: dp(30)
                                font_size: '15sp'
                                #font_name: 'Arial'
                                color: 0.4, 0.4, 0.4, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.width, None

                            TextInput:
                                id: chord_input
                                hint_text: "Ex: Am, C7, Dm/F"
                                font_size: '17sp'
                                #font_name: 'Arial'
                                multiline: False
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                size_hint_y: None
                                height: dp(50)
                                background_color: 0.96, 0.96, 0.96, 1
                                foreground_color: 0, 0, 0, 1  # Alterado para preto
                                hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                                cursor_color: 0.1, 0.5, 0.8, 1
                                selection_color: 0.1, 0.5, 0.8, 0.3

                        # Campo de grau
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(90)
                            spacing: dp(8)

                            Label:
                                text: "üìä Grau Harm√¥nico"
                                size_hint_y: None
                                height: dp(30)
                                font_size: '15sp'
                                #font_name: 'Arial'
                                color: 0.4, 0.4, 0.4, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.width, None

                            TextInput:
                                id: degree_input
                                hint_text: "Ex: I, ii, V7, bVII"
                                font_size: '17sp'
                                #font_name: 'Arial'
                                multiline: False
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                size_hint_y: None
                                height: dp(50)
                                background_color: 0.96, 0.96, 0.96, 1
                                foreground_color: 0, 0, 0, 1  # Alterado para preto
                                hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                                cursor_color: 0.1, 0.5, 0.8, 1
                                selection_color: 0.1, 0.5, 0.8, 0.3

                        # Campo de an√°lise
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: None
                            height: dp(140)
                            spacing: dp(8)

                            Label:
                                text: "üí≠ An√°lise Harm√¥nica"
                                size_hint_y: None
                                height: dp(30)
                                font_size: '15sp'
                                #font_name: 'Arial'
                                color: 0.4, 0.4, 0.4, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.width, None

                            TextInput:
                                id: comment_input
                                hint_text: "Fun√ß√£o harm√¥nica, movimento mel√≥dico, contexto na progress√£o..."
                                font_size: '16sp'
                                #font_name: 'Arial'
                                multiline: True
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                size_hint_y: None
                                height: dp(100)
                                background_color: 0.96, 0.96, 0.96, 1
                                foreground_color: 0, 0, 0, 1  # Alterado para preto
                                hint_text_color: 0.3, 0.3, 0.3, 1  # Alterado para branco
                                cursor_color: 0.1, 0.5, 0.8, 1
                                selection_color: 0.1, 0.5, 0.8, 0.3

                        # Bot√µes de a√ß√£o
                        GridLayout:
                            cols: 2
                            spacing: dp(10)
                            size_hint_y: None
                            height: dp(60)

                            Button:
                                text: "‚ûï INSERIR"
                                font_size: '15sp'
                                #font_name: 'Arial'
                                background_normal: ''
                                background_color: 0.1, 0.55, 0.85, 1
                                color: 1, 1, 1, 1
                                bold: True
                                on_release: root.insert_chord_tag()
                                canvas.before:
                                    Color:
                                        rgba: self.background_color
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(10), dp(10), dp(10), dp(10)]
                            
                            Button:
                                text: "üóëÔ∏è LIMPAR"
                                font_size: '15sp'
                                #font_name: 'Arial'
                                background_normal: ''
                                background_color: 0.95, 0.45, 0.35, 1
                                color: 1, 1, 1, 1
                                bold: True
                                on_release: root.clear_metadata_fields()
                                canvas.before:
                                    Color:
                                        rgba: self.background_color
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(10), dp(10), dp(10), dp(10)]

            # Card de visualiza√ß√£o - Melhorado
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: dp(420)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15), dp(15), dp(15), dp(15)]
                    Color:
                        rgba: 0.85, 0.85, 0.85, 0.5
                    Line:
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                        width: dp(1.5)
                padding: [dp(20), dp(20), dp(20), dp(20)]
                spacing: dp(15)

                Label:
                    text: "üëÄ PR√â-VISUALIZA√á√ÉO"
                    size_hint_y: None
                    height: dp(40)
                    font_size: '20sp'
                    #font_name: 'Arial'
                    bold: True
                    color: 0.2, 0.2, 0.2, 1
                    halign: 'left'
                    valign: 'middle'
                    text_size: self.width, None

                BoxLayout:
                    orientation: 'horizontal'
                    spacing: dp(15)

                    # Visualiza√ß√£o da cifra (60%)
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.6
                        spacing: dp(10)

                        Label:
                            text: "üéµ Cifra formatada"
                            size_hint_y: None
                            height: dp(35)
                            font_size: '16sp'
                            #font_name: 'Arial'
                            color: 0.4, 0.4, 0.4, 1
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.width, None

                        ScrollView:
                            scroll_type: ['bars', 'content']
                            bar_width: dp(10)
                            bar_color: 0.1, 0.5, 0.8, 0.7
                            canvas.before:
                                Color:
                                    rgba: 0.96, 0.96, 0.96, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12), dp(12), dp(12), dp(12)]
                            Label:
                                id: cifra_preview
                                markup: True
                                size_hint_y: None
                                height: max(dp(250), self.texture_size[1])
                                font_size: '17sp'
                                #font_name: 'Arial'
                                text_size: self.width - dp(30), None
                                halign: 'left'
                                valign: 'top'
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                color: 0.15, 0.15, 0.15, 1

                    # Visualiza√ß√£o de metadados (40%)
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_x: 0.4
                        spacing: dp(10)

                        Label:
                            text: "üìä Fun√ß√µes dos acordes"
                            size_hint_y: None
                            height: dp(35)
                            font_size: '16sp'
                            #font_name: 'Arial'
                            color: 0.4, 0.4, 0.4, 1
                            halign: 'left'
                            valign: 'middle'
                            text_size: self.width, None

                        ScrollView:
                            scroll_type: ['bars', 'content']
                            bar_width: dp(10)
                            bar_color: 0.1, 0.5, 0.8, 0.7
                            canvas.before:
                                Color:
                                    rgba: 0.97, 0.97, 0.97, 1
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(12), dp(12), dp(12), dp(12)]
                            Label:
                                id: metadata_preview
                                markup: True
                                size_hint_y: None
                                height: max(dp(250), self.texture_size[1])
                                font_size: '15sp'
                                #font_name: 'Arial'
                                text_size: self.width - dp(25), None
                                halign: 'left'
                                valign: 'top'
                                padding: [dp(15), dp(15), dp(15), dp(15)]
                                color: 0.2, 0.2, 0.2, 1

            # Card combinado - Melhorado
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: dp(450)
                spacing: dp(20)
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(15), dp(15), dp(15), dp(15)]
                    Color:
                        rgba: 0.85, 0.85, 0.85, 0.5
                    Line:
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(15))
                        width: dp(1.5)
                padding: [dp(20), dp(20), dp(20), dp(20)]

                # Lista de acordes (70%)
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.7
                    spacing: dp(15)

                    Label:
                        text: "üéº LISTA DE ACORDES"
                        size_hint_y: None
                        height: dp(40)
                        font_size: '18sp'
                        #font_name: 'Arial'
                        bold: True
                        color: 0.2, 0.2, 0.2, 1
                        halign: 'left'
                        valign: 'middle'
                        text_size: self.width, None

                    ScrollView:
                        scroll_type: ['bars', 'content']
                        bar_width: dp(10)
                        bar_color: 0.1, 0.5, 0.8, 0.7
                        canvas.before:
                            Color:
                                rgba: 0.96, 0.96, 0.96, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12), dp(12), dp(12), dp(12)]
                        
                        GridLayout:
                            id: chord_list
                            cols: 1
                            size_hint_y: None
                            height: self.minimum_height
                            spacing: dp(12)
                            padding: [dp(15), dp(15), dp(15), dp(15)]

                # Painel integrado (30%)
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.3
                    spacing: dp(15)

                    Label:
                        text: "üîß CONTROLES"
                        size_hint_y: None
                        height: dp(40)
                        font_size: '17sp'
                        #font_name: 'Arial'
                        bold: True
                        color: 0.2, 0.2, 0.2, 1
                        halign: 'left'
                        valign: 'middle'
                        text_size: self.width, None

                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(15)
                        canvas.before:
                            Color:
                                rgba: 0.97, 0.97, 0.97, 1
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(12), dp(12), dp(12), dp(12)]
                        padding: [dp(15), dp(15), dp(15), dp(15)]

                        # Se√ß√£o do Acorde Selecionado
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: 0.4
                            spacing: dp(10)

                            Label:
                                text: "üéØ Acorde Selecionado"
                                size_hint_y: None
                                height: dp(35)
                                font_size: '15sp'
                                #font_name: 'Arial'
                                bold: True
                                color: 0.3, 0.3, 0.3, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.width, None

                            ScrollView:
                                scroll_type: ['bars', 'content']
                                bar_width: dp(8)
                                bar_color: 0.1, 0.5, 0.8, 0.7
                                canvas.before:
                                    Color:
                                        rgba: 0.96, 0.96, 0.96, 1
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(10), dp(10), dp(10), dp(10)]
                        
                                Label:
                                    id: selected_chord_label
                                    text: "[i]Clique em um acorde da lista para ver detalhes[/i]"
                                    markup: True
                                    font_size: '15sp'
                                    #font_name: 'Arial'
                                    text_size: self.width - dp(20), None
                                    size_hint_y: None
                                    height: max(self.texture_size[1], dp(80))
                                    halign: 'left'
                                    valign: 'top'
                                    padding: [dp(12), dp(12), dp(12), dp(12)]
                                    color: 0.4, 0.4, 0.4, 1

                        # Se√ß√£o dos Controles de Metadados
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_y: 0.6
                            spacing: dp(12)

                            Label:
                                text: "‚öôÔ∏è Metadados de acordes"
                                size_hint_y: None
                                height: dp(35)
                                font_size: '15sp'
                                #font_name: 'Arial'
                                bold: True
                                color: 0.3, 0.3, 0.3, 1
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.width, None

                            Button:
                                text: "üîÑ ATUALIZAR"
                                font_size: '15sp'
                                #font_name: 'Arial'
                                background_normal: ''
                                background_color: 0.2, 0.75, 0.45, 1
                                color: 1, 1, 1, 1
                                bold: True
                                size_hint_y: None
                                height: dp(60)
                                on_release: root.update_metadata()
                                canvas.before:
                                    Color:
                                        rgba: self.background_color
                                    RoundedRectangle:
                                        pos: self.pos
                                        size: self.size
                                        radius: [dp(10), dp(10), dp(10), dp(10)]